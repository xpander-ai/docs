---
title: 'Connector Permissions'
description: 'Configure authentication for connectors using API Keys, OAuth, and AWS IAM Roles'
icon: 'lock'
---

## Authentication Methods

<CardGroup cols={3}>
<Card title='API Keys' icon='key'>
Token-based authentication
</Card>

<Card title='OAuth 2.0' icon='shield-check'>
Delegated access with user consent
</Card>

<Card title='AWS IAM Roles' icon='aws'>
Temporary cross-account credentials
</Card>
</CardGroup>

## Authentication Modes

- **Integration User** - Shared credentials for all agents
- **End-User** - Individual user authentication (Slack agents only)
- **No Authentication** - For public connectors

## API Key Authentication

### Configuration

1. Go to **Connectors** → select your connector
2. Click **Other auth options**
3. Enter a connector name
4. Select **Integration User** mode
5. Choose **API Key** method
6. Enter your API key
7. Select Auth Type:
   - **Bearer** - `Authorization: Bearer {token}`
   - **Basic** - Base64 encoded credentials
   - **Custom** - Define your own header
8. Save

<Frame>
![API Key Configuration](/images/connectors/github-issues-manager/img_3.png)
</Frame>

<Warning>
Never commit API keys to version control. Use minimum required permissions and rotate regularly.
</Warning>

## OAuth 2.0 Authentication

### Built-in OAuth (Recommended)

1. Go to **Connectors** → select your connector
2. Click **Sign in with {Service}**
3. Grant permissions
4. Done

Xpander manages tokens and handles refresh automatically.

<Frame>
![OAuth Flow](/images/oauth.png)
</Frame>

### Custom OAuth

For custom or self-hosted services:

1. Create OAuth app in your service's developer console
2. Set redirect URI: `https://app.xpander.ai/oauth/callback`
3. Copy Client ID and Client Secret
4. In xpander.ai: **Connectors** → **Other auth options**
5. Enter connector name and select **OAuth 2.0**
6. Paste credentials and configure endpoints
7. Define scopes (use minimum required)
8. Complete OAuth flow

```json Example Scopes
{
  "Google Calendar": ["calendar.readonly", "calendar.events"],
  "GitHub": ["repo", "read:user"],
  "Slack": ["channels:read", "chat:write"]
}
```

## AWS Cross-Account IAM Roles

Use IAM roles to grant Xpander temporary access to AWS services (S3, CloudWatch, Lambda, etc.) without sharing long-term credentials.

### Setup (CLI)

Replace `<YOUR_ACCOUNT_ID>` with your AWS account ID:

#### 1. Create the Trust Policy

```bash
cat > trust-policy.json <<'EOF'
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::211125312782:role/api-caller-sa"
      },
      "Action": "sts:AssumeRole",
      "Condition": {
        "StringEquals": {
          "sts:ExternalId": "cca29b9b-f718-43a3-8802-84e812a019e1"
        }
      }
    }
  ]
}
EOF
```

<Note>
The external ID prevents the [confused deputy problem](https://docs.aws.amazon.com/IAM/latest/UserGuide/confused-deputy.html). Always use this exact value.
</Note>

#### 2. Create the IAM Role

```bash
aws iam create-role \
  --role-name XpanderAccessRole \
  --assume-role-policy-document file://trust-policy.json \
  --description "Grants Xpander cross-account access to AWS services"
```

#### 3. Add Permissions

```bash
cat > xpander-access-policy.json <<'EOF'
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:ListBucket",
        "cloudwatch:GetMetricStatistics",
        "lambda:GetFunction",
        "logs:GetLogEvents"
      ],
      "Resource": "*"
    }
  ]
}
EOF

aws iam put-role-policy \
  --role-name XpanderAccessRole \
  --policy-name XpanderAccessPolicy \
  --policy-document file://xpander-access-policy.json
```

<Warning>
In production, restrict `Resource` to specific ARNs: `"Resource": ["arn:aws:s3:::my-bucket/*"]`
</Warning>

#### 4. Get Role ARN

```bash
aws iam get-role --role-name XpanderAccessRole --query "Role.Arn" --output text
```

Output: `arn:aws:iam::<YOUR_ACCOUNT_ID>:role/XpanderAccessRole`

#### 5. Connect in Xpander

1. Go to **Connections** → **Add new** → **AWS**
2. Choose **Assume Role**
3. Paste Role ARN
4. Save

<Frame>
![AWS IAM Role Configuration](/images/aws-iam-config.png)
</Frame>

### Common Permission Policies

<AccordionGroup>

<Accordion title="S3">

```json
{
  "Effect": "Allow",
  "Action": ["s3:GetObject", "s3:PutObject", "s3:ListBucket"],
  "Resource": ["arn:aws:s3:::my-bucket", "arn:aws:s3:::my-bucket/*"]
}
```

</Accordion>

<Accordion title="CloudWatch Logs">

```json
{
  "Effect": "Allow",
  "Action": ["logs:DescribeLogGroups", "logs:GetLogEvents"],
  "Resource": "arn:aws:logs:*:*:log-group:/aws/*"
}
```

</Accordion>

<Accordion title="Lambda">

```json
{
  "Effect": "Allow",
  "Action": ["lambda:InvokeFunction", "lambda:GetFunction"],
  "Resource": "arn:aws:lambda:*:*:function:*"
}
```

</Accordion>

</AccordionGroup>

## Troubleshooting

<AccordionGroup>

<Accordion title="API Key Errors">

- **401**: Key invalid or expired - regenerate in service provider
- **403**: Insufficient permissions - check key scopes
- Verify correct Auth Type (Bearer vs Basic)

</Accordion>

<Accordion title="OAuth Problems">

- **Token expired**: Re-authenticate through xpander.ai
- **Insufficient scopes**: Check granted permissions match requirements
- **Redirect URI mismatch**: Verify OAuth app settings

</Accordion>

<Accordion title="AWS IAM Issues">

- **Access Denied**: Check trust policy and permissions
- **External ID mismatch**: Confirm `cca29b9b-f718-43a3-8802-84e812a019e1`
- Test with: `aws sts assume-role --role-arn <ARN> --external-id <ID>`
- Review CloudTrail logs for details

</Accordion>

</AccordionGroup>

## Next Steps

Browse [200+ pre-built connectors](../../connectors/index.mdx) or learn about [tool configuration](connectors.mdx) and [custom tools](../../Examples/05-custom-tools-integration.mdx).
