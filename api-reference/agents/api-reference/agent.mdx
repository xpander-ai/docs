---
title: "Agent Class API Reference"
description: "Complete API reference for the Agent class with methods and properties"
icon: "robot"
mode: "wide"
---

# Agent Class

The **Agent** class represents a specific agent within the xpander.ai platform. It provides capabilities to manage tasks, invoke tools, access knowledge bases, and manage agent properties.

## Properties

### `id`
```python
id: str
```
Unique identifier for the agent.

### `name`
```python
name: str
```
Display name of the agent.

### `version`
```python
version: int
```
Current version number of the agent.

### `is_active`
```python
is_active: bool
```
Indicates whether the agent is currently active and available for use.

### `tools`
```python
tools: ToolsRepository
```
Object managing tools related to this agent.

### `deployment_type`
```python
deployment_type: AgentDeploymentType
```
Deployment type for the agent (Serverless or Container). Determines the execution environment for agent tasks.

### `origin_template`
```python
origin_template: Optional[str]
```
UUID of the template this agent was imported from. `None` if the agent was created from scratch rather than imported from a template.

## Methods

### `aload()

Asynchronously load additional agent details.

```python
async def aload() - Agent
```

**Returns:** Complete `Agent` object with detailed configuration.

### `acreate_task(**kwargs)`

Asynchronously create a new task for this agent.

```python
async def acreate_task(
  prompt: str,
  **kwargs
) - Task
```

**Example:**
```python
prompt = "What capabilities do you have?"
task = await agent.acreate_task(prompt=prompt)
print(f"Created task ID: {task.id}")
```

### `aget_knowledge_bases()`

Asynchronously access knowledge bases linked to this agent.

```python
async def aget_knowledge_bases() -> List[KnowledgeBase]
```

---

### `aget_user_sessions(user_id)`

Asynchronously retrieve all user sessions associated with this agent.

```python
async def aget_user_sessions(user_id: str) -> Any
```

**Parameters:**
- `user_id` (str): Identifier of the user whose sessions are to be retrieved

**Returns:** List of session records associated with the user.

**Example:**
```python
sessions = await agent.aget_user_sessions(user_id="user_123")
for session in sessions:
    print(f"Session ID: {session.session_id}")
```

**Raises:**
- `NotImplementedError`: If the agent framework does not support session storage
- `LookupError`: If session storage is not enabled for this agent
- `ImportError`: If required dependencies for Agno storage are not installed

**Note:** This method is only supported for agents using the Agno framework with session storage enabled.

---

### `get_user_sessions(user_id)`

Synchronously retrieve all user sessions associated with this agent.

```python
def get_user_sessions(user_id: str) -> Any
```

**Parameters:** Same as `aget_user_sessions()`

**Returns:** List of sessions related to the given user.

**Example:**
```python
sessions = agent.get_user_sessions(user_id="user_123")
print(f"Found {len(sessions)} sessions")
```

---

### `aget_session(session_id)`

Asynchronously retrieve a single session by its session ID.

```python
async def aget_session(session_id: str) -> Any
```

**Parameters:**
- `session_id` (str): Unique identifier of the session to retrieve

**Returns:** A single session record if found, or None if the session does not exist.

**Example:**
```python
session = await agent.aget_session(session_id="sess_456")
if session:
    print(f"Session found: {session.session_id}")
```

**Raises:**
- `NotImplementedError`: If the agent framework does not support session storage
- `LookupError`: If session storage is not enabled for this agent

---

### `get_session(session_id)`

Synchronously retrieve a single session by its session ID.

```python
def get_session(session_id: str) -> Any
```

**Parameters:** Same as `aget_session()`

**Returns:** A single session record if found, or None if the session does not exist.

**Example:**
```python
session = agent.get_session(session_id="sess_456")
```

---

### `adelete_session(session_id)`

Asynchronously delete a session by its session ID.

```python
async def adelete_session(session_id: str) -> None
```

**Parameters:**
- `session_id` (str): Unique identifier of the session to delete

**Example:**
```python
await agent.adelete_session(session_id="sess_456")
print("Session deleted successfully")
```

**Raises:**
- `NotImplementedError`: If the agent framework does not support session storage
- `LookupError`: If session storage is not enabled for this agent

---

### `delete_session(session_id)`

Synchronously delete a session by its session ID.

```python
def delete_session(session_id: str) -> None
```

**Parameters:** Same as `adelete_session()`

**Example:**
```python
agent.delete_session(session_id="sess_456")
```

## Usage

### Create and Manage Tasks

```python
# Create a simple task
prompt = "Summarize this document"
task = await agent.acreate_task(prompt=prompt)
print(f"Created task ID: {task.id}")

# Advanced task creation
complex_task = await agent.acreate_task(
    prompt="Analyze these sales reports",
    file_urls=["https://example.com/report1.csv"],
    output_format=OutputFormat.Json
)
```

### Manage Agent Tools

```python
# Access agent's tools repository
for tool in agent.tools.function:
    print(f"Tool: {tool.name}")
```

### Check Agent Deployment Configuration

```python
from xpander_sdk import AgentDeploymentType

# Check agent deployment type
if agent.deployment_type == AgentDeploymentType.Serverless:
    print("Agent configured for serverless deployment")
elif agent.deployment_type == AgentDeploymentType.Container:
    print("Agent configured for container deployment")

print(f"Deployment type: {agent.deployment_type}")
```

### Session Management

```python
from xpander_sdk import Agent

# Load agent
agent = await Agent.aload("agent-123")

# Get all sessions for a user
sessions = await agent.aget_user_sessions(user_id="user_123")
print(f"User has {len(sessions)} sessions")

# Retrieve specific session
session = await agent.aget_session(session_id="sess_456")
if session:
    print(f"Session ID: {session.session_id}")
    print(f"Created: {session.created_at}")

# Delete a session
await agent.adelete_session(session_id="sess_456")
print("Session deleted")

# Synchronous version
agent_sync = Agent.load("agent-123")
sessions_sync = agent_sync.get_user_sessions(user_id="user_123")
session_sync = agent_sync.get_session(session_id="sess_789")
agent_sync.delete_session(session_id="sess_789")
```

### Session Cleanup and Management

```python
async def cleanup_old_sessions(agent, user_id: str, keep_recent: int = 5):
    """Keep only the most recent N sessions for a user."""
    # Get all user sessions
    sessions = await agent.aget_user_sessions(user_id=user_id)
    
    # Sort by created date (assuming sessions have created_at)
    sorted_sessions = sorted(
        sessions,
        key=lambda s: s.created_at,
        reverse=True
    )
    
    # Delete older sessions
    sessions_to_delete = sorted_sessions[keep_recent:]
    for session in sessions_to_delete:
        await agent.adelete_session(session_id=session.session_id)
        print(f"Deleted session: {session.session_id}")
    
    print(f"Kept {keep_recent} most recent sessions")
    return len(sessions_to_delete)

# Usage
deleted_count = await cleanup_old_sessions(agent, user_id="user_123")
```

## Related Classes

- [`Agents`](/API reference/agents/API reference): Main class for managing multiple agents
- [`AgentsListItem`](/API reference/agents/API reference/agents-list-item): Summary representation of an agent
- [`ToolsRepository`](/API reference/tools/API reference/tools-repository): Repository for managing tools

## Related Modules

- [Tasks Module](/API reference/tasks)

