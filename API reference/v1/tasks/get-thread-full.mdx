---
title: "Get Task Thread (Full)"
openapi: "GET /v1/tasks/{task_id}/thread/full"
description: "Get complete conversation thread including all sub-tasks"
---

Retrieve the complete conversation thread for a task including all messages from the root task and all sub-tasks. This endpoint is particularly useful for debugging multi-agent workflows.

## Path Parameters

<ParamField path="task_id" type="string" required>
  Unique identifier of the task (UUID format)
</ParamField>

## Response

Returns a nested object containing conversation threads:

<ResponseField name="root" type="array">
  Array of messages from the root task
  <Expandable title="Message Object">
    <ResponseField name="id" type="string">
      Unique message identifier
    </ResponseField>
    <ResponseField name="role" type="string">
      Message role: `user`, `assistant`, `system`, `tool`
    </ResponseField>
    <ResponseField name="content" type="string">
      Message content
    </ResponseField>
    <ResponseField name="created_at" type="integer">
      Unix timestamp of message creation
    </ResponseField>
    <ResponseField name="tool_calls" type="array">
      Array of tool invocations (if any)
    </ResponseField>
    <ResponseField name="metrics" type="object">
      Token usage and performance metrics
      <Expandable title="Metrics Object">
        <ResponseField name="input_tokens" type="integer">
          Number of input tokens
        </ResponseField>
        <ResponseField name="output_tokens" type="integer">
          Number of output tokens
        </ResponseField>
        <ResponseField name="total_tokens" type="integer">
          Total tokens used
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="[sub_task_id]" type="array">
  For each sub-task, an array of messages with the same structure as root
</ResponseField>

## Example Request

```bash
curl -X GET -H "x-api-key: YOUR_API_KEY" \
  https://api.xpander.ai/v1/tasks/b7e398b2-cddc-4c1e-b714-8200953b8558/thread/full
```

## Example Response

```json
{
  "root": [
    {
      "id": "21355ad9-f228-400f-9eee-afeba48ab03c",
      "role": "user",
      "content": "Test async invoke",
      "created_at": 1762409145,
      "tool_calls": null,
      "metrics": {
        "input_tokens": 0,
        "output_tokens": 0,
        "total_tokens": 0
      }
    },
    {
      "id": "1619debb-160f-4f93-b80d-5d4b3c3b7a68",
      "role": "assistant",
      "content": "Your request to \"Test async invoke\" is noted. Could you please clarify...",
      "created_at": 1762409145,
      "tool_calls": null,
      "metrics": {
        "input_tokens": 3125,
        "output_tokens": 87,
        "total_tokens": 3212
      }
    }
  ],
  "sub-task-uuid-1": [
    {
      "id": "msg-1",
      "role": "user",
      "content": "Sub-task input",
      "created_at": 1762409146,
      "metrics": {...}
    }
  ]
}
```

## Use Cases

- **Debug multi-agent workflows** - See the complete execution tree
- **Analyze token usage** - Track token consumption across all sub-tasks
- **Audit conversations** - Review complete interaction history
- **Performance analysis** - Measure response times and token efficiency

## Notes

- This endpoint includes all sub-tasks spawned by the root task
- Each sub-task has its own message array keyed by task ID
- The `root` key always contains the main task's conversation
- Token metrics help track LLM API costs

## Comparison with /thread Endpoint

| Feature | /thread | /thread/full |
|---------|---------|--------------|
| Root task messages | ✅ | ✅ |
| Sub-task messages | ❌ | ✅ |
| Token metrics | ✅ | ✅ |
| Tool call details | ✅ | ✅ |
| **Status** | ⚠️ 502 Error | ✅ Working |

**Recommendation:** Use `/thread/full` instead of `/thread` as it provides more information and is currently more reliable.

## See Also

- [Get Task Thread](/API reference/v1/tasks/get-thread) - Get thread for root task only (currently has issues)
- [Get Task](/API reference/v1/tasks/get-task) - Get task details and status
- [List Tasks](/API reference/v1/tasks/list-tasks) - List all tasks
