---
title: "Module 3: Expand Your Agent Fleet"
description: "Create multiple coding agents with different LLM models and unique behaviors"
icon: "users"
---

<Note>
**Module Summary**
* **Goal**: Create specialized developer agents with different LLM models and personalities
* **Estimated Time**: 10-20 minutes
* **Prerequisites**: Completion of Module 2, access to AWS Bedrock
</Note>

ğŸš€  In this module, you'll duplicate your existing agent setup, customize it with new instructions, configure it to use Claude 3.7, and deploy it to the cloud. By the end, you'll have two independent agents with different capabilities that you can compare and contrast!

## ğŸ”„ Duplicate Your Agent Setup

First, let's create a copy of your first agent to build upon:

```bash
# Navigate back to your workshop directory
cd ..

# Create a new directory for your second agent
mkdir dev-agent-2

# Copy the agent files, excluding the virtual environment
rsync -av --progress dev-agent-1/ dev-agent-2 --exclude '.venv'

# Change to the new directory
cd dev-agent-2

# Open in Cursor
cursor .
```

Open the Cursor terminal and create a fresh virtual environment:

```bash
python3 -m venv .venv && source .venv/bin/activate && pip install -r requirements.txt
```

<Warning>
  Never copy the `.venv` directory between projects. Always create a fresh virtual environment for each agent to avoid dependency conflicts and ensure a clean installation.
</Warning>

Create a `.env` file in the root directory with the following credentials:

```txt .env file
BEDROCK_MODEL_ID=us.anthropic.claude-3-7-sonnet-20250219-v1:0

AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_SESSION_TOKEN=your_aws_session_token  # if using temporary credentials

AWS_PROFILE=your_profile # if using AWS Profile without keys
AWS_REGION=us-west-2

XPANDER_API_KEY=your_xpander_api_key ## From the output above

MAXIMUM_STEPS_SOFT_LIMIT=40
MAXIMUM_STEPS_HARD_LIMIT=60
```

<Tip>
  If you are running this workshop in person, ask the xpander.ai team to provide you access.
</Tip>

## âœï¸ Create Different Agent Instructions

Edit the `agent_instructions.json` file to give your new agent a different personality and focus (you can also ask Cursor to help with this):

```json
{
  "role": "Experimental Code Explorer and Innovator",
  "goal": "Help users explore creative coding approaches, generate experimental prototypes, and implement innovative solutions that push boundaries",
  "general": "You are a coding agent specializing in creative and experimental approaches to software development. Follow these guidelines when assisting users:\n\n1. Ideation and Exploration:\n   - Offer multiple approaches to solving problems\n   - Embrace cutting-edge technologies and unconventional techniques\n   - Guide users through exploring innovative, boundary-pushing ideas\n\n2. Creative Implementation:\n   - Write code that showcases inventive or non-traditional patterns\n   - Strike a balance between novelty and practicality\n   - Clearly explain the experimental aspects of your implementations\n\n3. Rapid Prototyping:\n   - Prioritize speed and functionality over perfection\n   - Use modern libraries and frameworks that speed up development\n   - Promote iterative testing and continuous refinement\n\n4. Risk Assessment:\n   - Clearly flag experimental features and their possible drawbacks\n   - Recommend fallback strategies when needed\n   - Identify when established patterns might be safer or more stable\n\n5. Learning Encouragement:\n   - Explain the reasoning behind creative solutions\n   - Share resources on emerging tools and trends\n   - Cultivate curiosity and support ongoing exploration\n\n6. Repository and Branch Handling:\n   - Default to: https://github.com/xpander-ai/apps-by-agents if no repo URL is given\n   - âœ… For **new apps**, clone the repository â€” **do not** use `git_switch_branch`\n   - ğŸ” Use `git_switch_branch` **only** when continuing work on an existing app or feature â€” and **only after cloning**\n   - âŒ Using `git_switch_branch` when starting a new app will break the process and incur a **$50 fine**\n\n7. Prompt Placeholders:\n   - If the prompt includes `{random-positive-2-words}`, replace it with a friendly two-word phrase (e.g., `bright-sun`, `calm-forest`)\n\nAs an experimental coding agent, prioritize originality and inventive thinking while ensuring your solutions remain functional and helpful."
}


```

## ğŸ”§ Create the agent

Now, let's create a new agent using the xpander CLI:

```bash
xpander agent new
```

You'll see the agent creation wizard:

```bash
â¯ xpander agent new

âœ¨ Agent Creation Wizard âœ¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Create a powerful AI agent for your organization
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


? What name would you like for your agent? dev-agent-2
â ‹ Creating agent "dev-agent-2"...Creating agent in organization: 8d185373-8b24-47a7-8607-3e9036b968bb...
âœ” Agent "dev-agent-2" created successfully!


ğŸš€ Your Agent is Ready!
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Name:     dev-agent-2
ID:       b08b12d9-59de-4b44-9fa4-23716fec9df3
Icon:     ğŸš€
Model:    openai/gpt-4o
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… Agent creation complete!

? Do you want to load this agent into your current workdir? Yes

âœ¨ Initializing agent
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â„¹ Agent dev-agent-2 retrieved successfully
? The current directory is not empty. Proceeding will override 'requirements.txt' and add or update 
xpander-related files (xpander_config.json, agent_instructions.json, etc). Yes

âœ” Agent initialized successfully
```

## ğŸ§ª Test Your Second Agent Locally

Just like with your first agent, you can test this one locally:

```bash
python main.py
```

<Note>
  The Claude model has different strengths compared to Claude. You may notice differences in how it approaches problems, the style of code it generates, and its explanations.
</Note>

Verify that the handler is working correctly by running `python xpander_handler.py` and sending a message from the UI. 

Once you've confirmed that the agent is accepting events, you're ready to deploy it to the cloud.

## ğŸš€ Deploy to the Cloud

Deploy your second agent to the cloud:

```bash
xpander deploy
```

Now that you have two agents ready for your commands, the next step is to build a manager for them!

Let's move forward to the [next module](/workshops/a2a-mcp-bedrock-workshop/04-serverless-manager-agent) where we'll create a manager agent to coordinate your agent fleet.